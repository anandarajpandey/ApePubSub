<!DOCTYPE html>
<html>
	<head>
		<title>Full Test | Demo</title>
		<meta http-equiv="cache-control" content="no-cache" />
		<link rel="stylesheet" href="../style.css" type="text/css" />


		<script type="text/javaScript" src="../global.js"></script>

		<script type="text/javaScript" src="../../js/src/utilities.js"></script>
		<script type="text/javaScript" src="../../js/src/client.js"></script>
		<script type="text/javaScript" src="../../js/src/onMessage.js"></script>
		<script type="text/javaScript" src="../../js/src/transport.js"></script>
		<script type="text/javaScript" src="../../js/src/channel.js"></script>
		<script type="text/javaScript" src="../../js/src/user.js"></script>
		<script type="text/javaScript" src="../../js/src/session.js"></script>
		<script>
		function load(){
			var parent = window.parent;
			var client = new APS(parent.client.option.server);
			
			parent.bot = client;
			
			client.user.bot = "yes";
			client.identifier = "BOT";
			client.option.session = EnableSession;
			client.option.debug = EnableDebug;
			
			
			client.log(parent.client.option.server);
			
			client.sub(parent.chanName, false, function(user, channel){
				//Simple string
				channel.pub("Hello World");
				//Complex string
				channel.pub("Th!s i$ a Ve&ryC0pLeX $trying !@#$%^&* ()_+=- `~?>< \{][?]},.");
				
				//Simple Object
				channel.pub({type: "simple", obj: "yes"});
				//Complex Object
				channel.pub({
					set: "ye$", 
					type: "complex", 
					cat: {
						green: "yes", 
						blue: "no", 
						grey: {
							white: "yes", 
							black: "yes"
						}
					}
				});
				
				//Send custom event
				channel.send("payload", {inprogress: "yes"});
				
				//Check user to user communication
				user.on("message", function(message, from){
					if(message == "Hi!")
						from.pub(message);
				})
				
				this.on("kick", function(msg, from, channel){
					channel.leave();
				})
			});
		}
		</script>
	</head>
 
	<body onload="load()">
		<h1>Sending Payload...</h1>
	</body>
</html>
