<!DOCTYPE html>
<html>
	<head>
		<title>Full Test | Demo</title>
		<meta http-equiv="cache-control" content="no-cache" />
		<link rel="stylesheet" href="../style.css" type="text/css" />
		
		<script type="text/javaScript" src="../../js/dev/utilities.js"></script>
		<script type="text/javaScript" src="../../js/dev/client.js"></script>
		<script type="text/javaScript" src="../../js/dev/onMessage.js"></script>
		<script type="text/javaScript" src="../../js/dev/transport.js"></script>
		<script type="text/javaScript" src="../../js/dev/channel.js"></script>
		<script type="text/javaScript" src="../../js/dev/user.js"></script>
		<script type="text/javaScript" src="../../js/dev/session.js"></script>
		<script>
		function load(){
			var parent = window.parent;
			var client = new APS(parent.client.option.server);
			
			
			client.user.bot = "yes";
			client.identifier = "BOT";
			client.option.session = false;
			//client.debug = true;
			
			
			client.log(parent.client.option.server);
			
			client.sub(parent.chanName, false, function(user, channel){
				//Simple string
				channel.pub("Hello World");
				//Complex string
				channel.pub("Th!s i$ a Ve&ryC0pLeX $trying !@#$%^&* ()_+=- `~?>< \{][?]},.");
				
				//Simple Object
				channel.pub({type: "simple", obj: "yes"});
				//Complex Object
				channel.pub({
					set: "ye$", 
					type: "complex", 
					cat: {
						green: "yes", 
						blue: "no", 
						grey: {
							white: "yes", 
							black: "yes"
						}
					}
				});
				
				//Send custom event
				channel.sendEvent("payload", {inprogress: "yes"});
			});
		}
		</script>
	</head>
 
	<body onload="load()">
		<h1>Sending Payload...</h1>
	</body>
</html>
